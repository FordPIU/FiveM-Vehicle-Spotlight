local SpotlightVehicles = {
    [`pdairport1`] = {
        spotlight = {
            extra = 7,
            bone = "2",
        },
    },
    [`pdairport2`] = {
        spotlight = {
            extra = 7,
            bone = "2",
        },
    },
    [`pdairport3`] = {
        spotlight = {
            extra = 7,
            bone = "2",
        },
    },
    [`pdairport4`] = {
        spotlight = {
            extra = 7,
            bone = "2",
        },
    },
    [`pdairport5`] = {
        spotlight = {
            extra = 7,
            bone = "2",
        },
    },
    [`pdcid1`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`pdcid2`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`pdcid3`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`pdcid4`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`pdcid5`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`pdcid6`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`pdcid7`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`pdcid8`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`pdcmd1`] = {
        spotlight = {
            extra = 4,
            bone = "3",
        },
    },
    [`pdcmd2`] = {
        spotlight = {
            extra = 4,
            bone = "1",
        },
    },
    [`pdsenora1`] = {
        spotlight = {
            extra = 12,
            bone = "3",
        },
    },
    [`pdsenora2`] = {
        spotlight = {
            extra = 12,
            bone = "1",
        },
    },
    [`pdsenora3`] = {
        spotlight = {
            extra = 12,
            bone = "3",
        },
    },
    [`pdsenora4`] = {
        spotlight = {
            extra = 12,
            bone = "1",
        },
    },
    [`pdsenora5`] = {
        spotlight = {
            extra = 12,
            bone = "3",
        },
    },
    [`pdsenora6`] = {
        spotlight = {
            extra = 12,
            bone = "3",
        },
    },
    [`pdsenora7`] = {
        spotlight = {
            extra = 12,
            bone = "3",
        },
    },
    [`pdsenora8`] = {
        spotlight = {
            extra = 12,
            bone = "3",
        },
    },
    [`pdsenora9`] = {
        spotlight = {
            extra = 12,
            bone = "1",
        },
    },
    [`pdsenora10`] = {
        spotlight = {
            extra = 12,
            bone = "3",
        },
    },
    [`pdsenora11`] = {
        spotlight = {
            extra = 12,
            bone = "1",
        },
    },
    [`pdsenora12`] = {
        spotlight = {
            extra = 12,
            bone = "3",
        },
    },
    [`pdsenora13`] = {
        spotlight = {
            extra = 12,
            bone = "3",
        },
    },
    [`pdsenora14`] = {
        spotlight = {
            extra = 12,
            bone = "1",
        },
    },
    [`pdsenora15`] = {
        spotlight = {
            extra = 12,
            bone = "1",
        },
    },
    [`pdum1`] = {
        spotlight = {
            extra = 7,
            bone = "1",
        },
    },
    [`pdum2`] = {
        spotlight = {
            extra = 7,
            bone = "1",
        },
    },
    [`pdum3`] = {
        spotlight = {
            extra = 7,
            bone = "1",
        },
    },
    [`pdum4`] = {
        spotlight = {
            extra = 7,
            bone = "1",
        },
    },
    [`pdum5`] = {
        spotlight = {
            extra = 7,
            bone = "1",
        },
    },
    [`pdum6`] = {
        spotlight = {
            extra = 7,
            bone = "1",
        },
    },
    [`socid1`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`socid2`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`socid3`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`socid4`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`socid5`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`socid6`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`socid7`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`socid8`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`spcid1`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`spcid2`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`spcid3`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`spcid4`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`spcid5`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`spcid6`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`spcid7`] = {
        spotlight = {
            extra = 6,
            bone = "1",
        },
    },
    [`spcid8`] = {
        spotlight = {
            extra = 6,
            bone = "3",
        },
    },
    [`slr11sedan`] = {
        spotlight = {
            extra = 4,
            bone = "2",
        },
    },
    [`slr13utility`] = {
        spotlight = {
            extra = 4,
            bone = "2",
        },
    },
    [`slr16sedan`] = {
        spotlight = {
            extra = 4,
            bone = "2",
        },
    },
    [`slr16utility`] = {
        spotlight = {
            extra = 4,
            bone = "3",
        },
    },
    [`slr18sedan`] = {
        spotlight = {
            extra = 4,
            bone = "2",
        },
    },
    [`slr18suv`] = {
        spotlight = {
            extra = 4,
            bone = "3",
        },
    },
    [`slr20utility`] = {
        spotlight = {
            extra = 4,
            bone = "3",
        },
    },
    [`slr181500`] = {
        spotlight = {
            extra = 4,
            bone = "3",
        },
    },


    [`pd1`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        },
        takedowns = {
            extra = 8,
            requires_highbeans = true
        }
    },
    [`pd2`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd3`] = {
        spotlight = {
            extra = 6,
            bone = "4"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd4`] = {
        spotlight = {
            extra = 6,
            bone = "4"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd5`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd6`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd7`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd8`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd9`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd10`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd11`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd12`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd13`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd14`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd15`] = {
        spotlight = {
            extra = 6,
            bone = "1"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pd16`] = {
        spotlight = {
            extra = 6,
            bone = "4"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },

    [`pds1`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds2`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds3`] = {
        spotlight = {
            extra = 6,
            bone = "4"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds4`] = {
        spotlight = {
            extra = 6,
            bone = "4"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds5`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds6`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds7`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds8`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds9`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds10`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds11`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds12`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds13`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds14`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds15`] = {
        spotlight = {
            extra = 6,
            bone = "1"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },
    [`pds16`] = {
        spotlight = {
            extra = 6,
            bone = "4"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
        }
    },

    [`pdkn1`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkn2`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkn3`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkn4`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkn5`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkn6`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkn7`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkn8`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10, 7 },  -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },

    [`pdkns1`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkns2`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkns3`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkns4`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkns5`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkns6`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkns7`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },
    [`pdkns8`] = {
        spotlight = {
            extra = 6,
            bone = "2"
        },
        controls = {
            { 10 },     -- Front Cruise
            { 11, 12 }, -- Rear Cruise
            { 9 }       -- All Cruise
        }
    },

    [`so1`] = {
        spotlight = {
            extra = 11,
            bone = "3"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so2`] = {
        spotlight = {
            extra = 11,
            bone = "4"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so3`] = {
        spotlight = {
            extra = 11,
            bone = "1"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so4`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so5`] = {
        spotlight = {
            extra = 11,
            bone = "4"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so6`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so7`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so8`] = {
        spotlight = {
            extra = 11,
            bone = "3"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so9`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so10`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so11`] = {
        spotlight = {
            extra = 11,
            bone = "4"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so12`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so13`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so14`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so15`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`so16`] = {
        spotlight = {
            extra = 11,
            bone = "1"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },

    [`sokn1`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`sokn2`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`sokn3`] = {
        spotlight = {
            extra = 11,
            bone = "3"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`sokn4`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`sokn5`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`sokn6`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },
    [`sokn7`] = {
        spotlight = {
            extra = 11,
            bone = "2"
        },
        controls = {
            { 4 },            -- Cruise
            { 3, 9, 10, 12 }, -- Rear Onlys
        }
    },

    [`sp1`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp2`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp3`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp4`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp5`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp6`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp7`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp8`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp9`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp10`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp11`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp12`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp13`] = {
        spotlight = {
            extra = 8,
            bone = "4"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp14`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp15`] = {
        spotlight = {
            extra = 8,
            bone = "1"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sp16`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sps1`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sps2`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sps3`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sps4`] = {
        spotlight = {
            extra = 8,
            bone = "2"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },
    [`sps5`] = {
        spotlight = {
            extra = 8,
            bone = "1"
        },
        controls = {
            { 2 }, -- Cruise
        }
    },

    [`spkn1`] = {
        spotlight = {
            extra = 10,
            bone = "1"
        },
    },
    [`spkn2`] = {
        spotlight = {
            extra = 10,
            bone = "1"
        },
    },
    [`spkn3`] = {
        spotlight = {
            extra = 10,
            bone = "1"
        },
    }
}

--[[local SpotlightConfig = {
    Color = { 255, 255, 255 },
    Distance = 250.0,
    Brightness = 1.2, -- 1.0
    Roundness = 2.0,
    Radius = 30.0,
    Falloff = 0.5,
}]]

local SpotlightConfig = {
    Color = { 200, 220, 255 }, -- Slightly bluish color for a realistic PAR46 spotlight
    Distance = 100.0,
    Brightness = 10.0,         -- Adjusted for realism
    Roundness = 3.0,           -- Slightly more focused light
    Radius = 15.0,
    Falloff = 5.0,
}

local TakedownConfig = {
    Color = { 255, 255, 255 }, -- Pure white for a takedown light
    Distance = 50.0,           -- Reduced distance for close illumination
    Brightness = 30.0,         -- Increased brightness for visibility
    Roundness = 1.0,           -- Highly focused light
    Radius = 30.0,             -- Larger radius for broader coverage
    Falloff = 2.0,             -- Reduced falloff for strong illumination
}

local function getEntityMatrix(element, elementbone)
    local rot = GetEntityBoneRotation(element, elementbone) -- ZXY
    local rx, ry, rz = rot.x, rot.y, rot.z
    rx, ry, rz = math.rad(rx), math.rad(ry), math.rad(rz)
    local matrix = {}
    matrix[1] = {}
    matrix[1][1] = math.cos(rz) * math.cos(ry) - math.sin(rz) * math.sin(rx) * math.sin(ry)
    matrix[1][2] = math.cos(ry) * math.sin(rz) + math.cos(rz) * math.sin(rx) * math.sin(ry)
    matrix[1][3] = -math.cos(rx) * math.sin(ry)
    matrix[1][4] = 1

    matrix[2] = {}
    matrix[2][1] = -math.cos(rx) * math.sin(rz)
    matrix[2][2] = math.cos(rz) * math.cos(rx)
    matrix[2][3] = math.sin(rx)
    matrix[2][4] = 1

    matrix[3] = {}
    matrix[3][1] = math.cos(rz) * math.sin(ry) + math.cos(ry) * math.sin(rz) * math.sin(rx)
    matrix[3][2] = math.sin(rz) * math.sin(ry) - math.cos(rz) * math.cos(ry) * math.sin(rx)
    matrix[3][3] = math.cos(rx) * math.cos(ry)
    matrix[3][4] = 1

    matrix[4] = {}
    local pos = GetWorldPositionOfEntityBone(element, elementbone)
    matrix[4][1], matrix[4][2], matrix[4][3] = pos.x, pos.y, pos.z - 1.0
    matrix[4][4] = 1

    return matrix
end

local function getOffsetFromEntityInWorldCoords(entity, boneindex, offX, offY, offZ)
    local m = getEntityMatrix(entity, boneindex)
    local x = offX * m[1][1] + offY * m[2][1] + offZ * m[3][1] + m[4][1]
    local y = offX * m[1][2] + offY * m[2][2] + offZ * m[3][2] + m[4][2]
    local z = offX * m[1][3] + offY * m[2][3] + offZ * m[3][3] + m[4][3]
    return vector3(x, y, z)
end

Citizen.CreateThread(function()
    while true do
        Wait(0)

        for _, v in pairs(GetGamePool("CVehicle")) do
            local vehicleData = SpotlightVehicles[GetEntityModel(v)]

            if vehicleData ~= nil and GetIsVehicleEngineRunning(v) then
                local _, _, on = GetVehicleLightsState(v)
                -- Spotlight
                if vehicleData.spotlight ~= nil then
                    local spotlightData = vehicleData.spotlight
                    if IsVehicleExtraTurnedOn(v, spotlightData.extra) then
                        if on == 1 then
                            local bIndex = GetEntityBoneIndexByName(v, "extralight_" .. spotlightData.bone)
                            local bPos = GetWorldPositionOfEntityBone(v, bIndex)
                            local ePos = getOffsetFromEntityInWorldCoords(v, bIndex, 0.0, 5.0, 1.0)
                            local vDir = ePos - bPos

                            DrawSpotLightWithShadow(bPos[1], bPos[2], bPos[3], vDir[1], vDir[2], vDir[3],
                                SpotlightConfig.Color[1], SpotlightConfig.Color[2], SpotlightConfig.Color[3],
                                SpotlightConfig.Distance, SpotlightConfig.Brightness, SpotlightConfig.Roundness,
                                SpotlightConfig.Radius, SpotlightConfig.Falloff, v) -- Shadow ID Used to be 0
                        end
                    end
                end

                -- Takedown
                if vehicleData.takedowns ~= nil then
                    local takedownData = vehicleData.takedowns
                    if IsVehicleExtraTurnedOn(v, takedownData.extra) then
                        if (takedownData.requires_highbeans and on == 1) or (not takedownData.requires_highbeans) then
                            local bIndex = GetEntityBoneIndexByName(v, "extra_" .. tostring(takedownData.extra))
                            --local bPos = GetWorldPositionOfEntityBone(v, bIndex)
                            local bPos = getOffsetFromEntityInWorldCoords(v, bIndex, 0.0, 0.5, 1.0)
                            local ePos = getOffsetFromEntityInWorldCoords(v, bIndex, 0.0, 5.0, 1.0)
                            --local ePos = GetOffsetFromEntityGivenWorldCoords(v, 0.0, 5.0, 0.0)
                            local vDir = ePos - bPos

                            DrawSpotLightWithShadow(bPos[1], bPos[2], bPos[3], vDir[1], vDir[2], vDir[3],
                                TakedownConfig.Color[1], TakedownConfig.Color[2], TakedownConfig.Color[3],
                                TakedownConfig.Distance, TakedownConfig.Brightness, TakedownConfig.Roundness,
                                TakedownConfig.Radius, TakedownConfig.Falloff, v * 10) -- Shadow ID Used to be 0
                        end
                    end
                end
            end
        end
    end
end)

function ToggleExtras(plrVeh, extras, enable)
    for _, extra in pairs(extras) do
        SetVehicleExtra(plrVeh, extra, enable)
    end
end

RegisterKeyMapping("togglecontrol1", "Toggle Light Option 1", "keyboard", "INSERT")
RegisterCommand("togglecontrol1", function(src, args, raw)
    local plrVeh = GetVehiclePedIsIn(PlayerPedId(), false)
    local vehData = SpotlightVehicles[GetEntityModel(plrVeh)]
    local driverPed = GetPedInVehicleSeat(plrVeh, -1)

    if vehData ~= nil and vehData.controls ~= nil and vehData.controls[1] ~= nil and driverPed == PlayerPedId() then
        local data = vehData.controls[1]
        local isOption1On = false

        for _, extra in pairs(data) do
            local isExtraOn = IsVehicleExtraTurnedOn(plrVeh, extra)
            isOption1On = not isExtraOn
            SetVehicleExtra(plrVeh, extra, isExtraOn) -- Toggle the extra
        end

        -- If Option 2 is on, then turn on Option 3
        if vehData.controls[3] ~= nil then
            local isOption2On = vehData.controls[2] ~= nil and IsVehicleExtraTurnedOn(plrVeh, vehData.controls[2][1])

            if isOption1On and isOption2On then
                ToggleExtras(plrVeh, vehData.controls[3], false)
            else
                ToggleExtras(plrVeh, vehData.controls[3], true)
            end
        end
    end
end)

RegisterKeyMapping("togglecontrol2", "Toggle Light Option 2", "keyboard", "HOME")
RegisterCommand("togglecontrol2", function(src, args, raw)
    local plrVeh = GetVehiclePedIsIn(PlayerPedId(), false)
    local vehData = SpotlightVehicles[GetEntityModel(plrVeh)]
    local driverPed = GetPedInVehicleSeat(plrVeh, -1)

    if vehData ~= nil and vehData.controls ~= nil and vehData.controls[2] ~= nil and driverPed == PlayerPedId() then
        local data = vehData.controls[2]
        local isOption2On = false

        -- Check if Option 2 is on
        for _, extra in pairs(data) do
            local isExtraOn = IsVehicleExtraTurnedOn(plrVeh, extra)
            isOption2On = not isExtraOn
            SetVehicleExtra(plrVeh, extra, isExtraOn) -- Toggle the extra
        end

        -- If Option 1 is on, then turn on Option 3
        if vehData.controls[3] ~= nil then
            local isOption1On = vehData.controls[1] ~= nil and IsVehicleExtraTurnedOn(plrVeh, vehData.controls[1][1])

            if isOption1On and isOption2On then
                ToggleExtras(plrVeh, vehData.controls[3], false)
            else
                ToggleExtras(plrVeh, vehData.controls[3], true)
            end
        end
    end
end)

RegisterKeyMapping("togglecontrol3", "Toggle Light Option 3", "keyboard", "DELETE")
RegisterCommand("togglecontrol3", function(src, args, raw)
    local plrVeh = GetVehiclePedIsIn(PlayerPedId(), false)
    local vehData = SpotlightVehicles[GetEntityModel(plrVeh)]
    local driverPed = GetPedInVehicleSeat(plrVeh, -1)

    if vehData ~= nil and vehData.takedowns ~= nil and driverPed == PlayerPedId() then
        ToggleExtras(plrVeh, { vehData.takedowns.extra }, IsVehicleExtraTurnedOn(plrVeh, vehData.takedowns.extra))
    end
end)
